<!DOCTYPE html>
<html lang="en-us">
  
  <head>
  <meta charset="UTF-8">
  <title>Kanna</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <link rel="stylesheet" href="http://tid-kijyun.github.io/Kanna/css/normalize.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="http://tid-kijyun.github.io/Kanna/css/cayman.css">
</head>


  <body>
    <section class="page-header">
  <h1 class="project-name">Kanna</h1>
  <h2 class="project-tagline">Kanna(鉋) is an XML/HTML parser for macOS / iOS / tvOS / Linux.</h2>
  <a href="https://github.com/tid-kijyun/Kanna" class="btn">View on GitHub</a>
</section>


    <section class="main-content">
      
      <h1 id="parsing-an-htmlxml-document">Parsing an HTML/XML document</h1>
<ol>
  <li><a href="#from-a-string">From a String</a></li>
  <li><a href="#from-a-file">From a File</a></li>
  <li><a href="#from-the-internets">From the Internets</a></li>
  <li><a href="#encoding">Encoding</a></li>
  <li><a href="#parse-options">Parse Options</a></li>
</ol>

<h2 id="from-a-string">From a String</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>let html = "<span class="nt">&lt;html&gt;&lt;body&gt;&lt;h1&gt;</span>Tutorials<span class="nt">&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;</span>"
if let htmlDoc = HTML(html: html, encoding: .utf8) {
}

let xml = "<span class="nt">&lt;root&gt;&lt;item&gt;&lt;name&gt;</span>Tutorials<span class="nt">&lt;/name&gt;&lt;/item&gt;&lt;/root&gt;</span>"
if let xmlDoc = XML(xml: xml, encoding: .utf8) {
}
</code></pre>
</div>

<p>The variables <code class="highlighter-rouge">htmlDoc</code> and <code class="highlighter-rouge">xmlDoc</code> are Kanna documents, which have interesting properties and methods.</p>

<h2 id="from-a-file">From a File</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>let data = NSData(contentsOfFile: filePath)!
if let doc = HTML(html: data, encoding: .utf8) {
}
</code></pre>
</div>

<p>or</p>

<div class="highlighter-rouge"><pre class="highlight"><code>let html = try! String(contentsOfFile: path, encoding: .utf8)
if let doc = HTML(html: html, encoding: .utf8) {
}
</code></pre>
</div>

<h2 id="from-the-internets">From the Internets</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>let url = NSURL(string: "https://en.wikipedia.org/wiki/Cat")
if let doc = HTML(url: url!, encoding: .utf8) {
}
</code></pre>
</div>

<p>Of cause, You can use other networking libraries. (e.g. <a href="https://github.com/Alamofire/Alamofire">Alamofire</a>)</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Alamofire.request("https://en.wikipedia.org/wiki/Cat").responseString(queue: nil, encoding: .utf8) { response in
    if let html = response.result.value,
       let doc = HTML(html: html, encoding: .utf8) {
        for headline in doc.css(".mw-headline") {
            print(headline.text)
        }
    }
}
</code></pre>
</div>

<h2 id="encoding">Encoding</h2>
<p>If you want Kanna to handle the document encoding properly, Your best bet is to explicitly set the encoding.
Hrea is an example of explicitly setting the encoding to EUC-JP on the parser:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>let html = "<span class="nt">&lt;html&gt;&lt;body&gt;&lt;h1&gt;</span>Tutorials<span class="nt">&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;</span>"
if let htmlDoc = HTML(html: html, encoding: .japaneseEUC) {
}
</code></pre>
</div>

<h2 id="parse-options">Parse Options</h2>
<p>Kanna offers quite a few options that affect how a document is parsed.</p>

<p><em>Note: This is optional argument.</em></p>

<div class="highlighter-rouge"><pre class="highlight"><code>let html = "<span class="nt">&lt;html&gt;&lt;body&gt;&lt;h1&gt;</span>Tutorials<span class="nt">&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;</span>"
if let doc = HTML(html: html, encoding: .utf8, option: .htmlParseUseLibxml([.STRICT])) {
}
</code></pre>
</div>


      <footer class="site-footer">
  <span class="site-footer-owner"><a href="">Kanna</a> is maintained by <a href="http://tid-kijyun.github.io/">Atsushi Kiwaki</a>. It was inspired by <a href="http://www.nokogiri.org">Nokogiri 鋸</a></span>
  <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/pietromenna/jekyll-cayman-theme">Cayman theme</a> by <a href="http://github.com/jasonlong">Jason Long</a>.</span>
</footer>


    </section>

  </body>
</html>
